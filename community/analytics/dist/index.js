var Analytics=function(s){"use strict";const i={id:"com.bigmind.analytics",name:"Plugin Analytics",version:"1.0.0",description:"Analyse et collecte des statistiques sur vos mindmaps (exemple)",author:"BigMind Team",main:"analytics-plugin.js",permissions:[],hooks:{listens:["mindmap.nodeCreated","mindmap.nodeUpdated","mindmap.nodeDeleted"],emits:[]}};class a{constructor(){this.manifest=i,this.context=null,this.stats={nodesCreated:0,nodesUpdated:0,nodesDeleted:0}}async activate(t){this.context=t;try{const e=await t.api.storage.get("analytics-stats");e&&(this.stats=JSON.parse(e))}catch{}t.hooks.registerAction("mindmap.nodeCreated",async()=>{this.stats.nodesCreated+=1,await this.saveStats()}),t.hooks.registerAction("mindmap.nodeUpdated",async()=>{this.stats.nodesUpdated+=1,await this.saveStats()}),t.hooks.registerAction("mindmap.nodeDeleted",async()=>{this.stats.nodesDeleted+=1,await this.saveStats()})}async saveStats(){if(this.context)try{await this.context.api.storage.set("analytics-stats",JSON.stringify(this.stats))}catch(t){console.error("‚ùå Failed to save stats:",t)}}async deactivate(){this.context=null}}const n=new a;return s.AnalyticsPlugin=a,s.default=n,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),s}({});
